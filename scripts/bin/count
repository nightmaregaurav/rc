#!/usr/bin/env python3

import os
import sys
import fnmatch

script_name = os.path.basename(sys.argv[0])

HELP_MSG = f"""Usage: {script_name} '[pattern]'

Counts the total number of files and folders in the current directory only (no subdirectories).
If a file pattern is provided, it also counts the matching files.

Examples:
  {script_name}           # Counts all files and folders
  {script_name} "*.pdf"   # Counts all files and folders, plus matching *.pdf files
"""

# Help flag
if len(sys.argv) > 1 and sys.argv[1] in ("--help", "-h"):
    print(HELP_MSG)
    sys.exit(0)

# Pattern argument
pattern = sys.argv[1] if len(sys.argv) > 1 else "*"

# List top-level files and directories
entries = os.listdir(".")
files = [f for f in entries if os.path.isfile(f)]
folders = [d for d in entries if os.path.isdir(d)]

# Count matches
matching_files = [f for f in files if fnmatch.fnmatch(f, pattern)]
matching_folders = [d for d in folders if fnmatch.fnmatch(d, pattern)]

# Print results
print(f"Total: {len(files) + len(folders)}")
print(f"Folders: {len(folders)}")
print(f"Files: {len(files)}")
if pattern != "*":
    print(f"{pattern}: {len(matching_files)} files, {len(matching_folders)} folders")

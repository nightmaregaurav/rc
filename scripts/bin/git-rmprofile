#!/usr/bin/env bash

for arg in "$@"; do
    if [[ "$arg" == "--help" || "$arg" == "-h" ]]; then
        echo "Usage: git rmprofile <profiles>"
        echo
        echo "Removes the specified git profiles."
        echo
        echo "Examples:"
        echo "  git rmprofile myprofile1 myprofile2"
        exit 0
    fi
done

profiles=("$@")
if [[ -z profiles ]]; then
    echo "[!] Missing argument: <profiles>" >&2
    echo "Try 'git rmprofile --help' for more information." >&2
    exit 1
fi

for profile in "${profiles[@]}"; do
    profile_file="$GIT_PROFILE_DIR/.${profile}"
    if [[ ! -f "$profile_file" ]]; then
        echo "[!] Profile '$profile' not found." >&2
        continue;
    fi

    rm -f "$profile_file"
    echo "[âœ“] Profile '$profile' removed."
done

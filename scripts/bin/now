#!/usr/bin/env -S uv run --script

# /// script
# requires-python = ">=3.14"
# dependencies = [
#     "argcomplete",
# ]
# ///

import time
from datetime import datetime
import argparse
import argcomplete


def get_local_datetime() -> str:
    now = datetime.now()

    offset_sec = (
        time.localtime().tm_gmtoff
        if hasattr(time.localtime(), "tm_gmtoff")
        else -time.timezone
    )
    hours = offset_sec // 3600
    minutes = (abs(offset_sec) % 3600) // 60
    tz_str = f"{'+' if hours >= 0 else '-'}{abs(hours):02d}{minutes:02d}"

    return now.strftime(f"%Y-%m-%d %A %H:%M:%S {tz_str}")


def main():
    parser = argparse.ArgumentParser(
        description="Show the current date and time in a human-readable format, including timezone.",
        formatter_class=argparse.RawTextHelpFormatter,
        add_help=False,
    )

    parser.add_argument(
        "-h", "--help",
        action="help",
        help="Show help message and exit.",
    )

    argcomplete.autocomplete(parser, always_complete_options=False)
    parser.parse_args()

    print(get_local_datetime())


if __name__ == "__main__":
    main()

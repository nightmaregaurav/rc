export GIT_PROFILE_DIR="$HOME/.git-ssh-profiles"
mkdir -p "$GIT_PROFILE_DIR"

# Make all scripts in bin folder executable
if [ -d "$current_rc_script_dir/scripts/bin" ]; then
  for script in "$current_rc_script_dir/scripts/bin"/*; do
    [ -f "$script" ] && chmod u+x "$script"
  done
fi

PATH="$PATH:$current_rc_script_dir/scripts/bin"

# Make sure all completion functions are sourced
if [ -d "$current_rc_script_dir/scripts/completions" ]; then
  for completion_file in "$current_rc_script_dir/scripts/completions"/*; do
    if [[ -f "$completion_file" ]]; then
      source "$completion_file"
    fi
  done
fi

# Give ZSH the capability to complete commands using complete commands
if [ -n "$ZSH_VERSION" ]; then
    autoload -Uz compinit && compinit
    autoload -Uz bashcompinit && bashcompinit
fi

# Register completions
if command -v register-python-argcomplete >/dev/null 2>&1; then
    eval "$(register-python-argcomplete clip 2>/dev/null || true)"
    eval "$(register-python-argcomplete count 2>/dev/null || true)"
    eval "$(register-python-argcomplete cpu-usage 2>/dev/null || true)"
    eval "$(register-python-argcomplete localip 2>/dev/null || true)"
    eval "$(register-python-argcomplete localip-fast 2>/dev/null || true)"
    eval "$(register-python-argcomplete publicip 2>/dev/null || true)"
    eval "$(register-python-argcomplete publicip-fast 2>/dev/null || true)"
    eval "$(register-python-argcomplete ls-openports 2>/dev/null || true)"
    eval "$(register-python-argcomplete free-port-after 2>/dev/null || true)"
    eval "$(register-python-argcomplete mkcd 2>/dev/null || true)"
    eval "$(register-python-argcomplete now 2>/dev/null || true)"
    eval "$(register-python-argcomplete recurse-run 2>/dev/null || true)"
fi

complete -o default -F _git_as git-as
complete -o default -F _git_rmprofile git-rmprofile
complete -o default -F _git_mkprofile git-mkprofile
complete -o default -F _git_lsprofile git-lsprofile
complete -o default -F _youtube_get youtube-get
complete -o default -F _split_video split-video
complete -o default -F _serve serve
complete -o default -F _amplify amplify
complete -o default -F _remind_me remind-me
complete -o default -F _generic_help localip-fast
complete -o default -F _mssql_backup mssql-backup
complete -o default -F _mssql_restore mssql-restore
complete -o default -F _generic_help list-cameras
complete -o default -F _snap_from_source snap-camera
complete -o default -F _generic_help install-command-hook
complete -o default -F _generic_help uninstall-command-hook
complete -o default -F _generic_help setup-uv
